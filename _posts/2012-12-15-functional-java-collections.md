---
id: 75
title: Functional Java collections
date: 2012-12-15T07:30:00+00:00
author: Mite Mitreski
layout: post
guid: http://www.javaadvent.com/2012/12/functional-java-collections/
permalink: /2012/12/functional-java-collections.html
blogger_blog:
  - www.javaadvent.com
blogger_author:
  - Mite Mitreski
blogger_permalink:
  - /2012/12/functional-java-collections.html
blogger_internal:
  - /feeds/2481158163384033132/posts/default/6244186129562971289
categories:
  - 2012
  - collections
  - guava
  - iteration
  - java
  - LambdaJ
  - transformations
---
There is a lot of functional hype these days so I would give a short overview on what is out there at least when it comes to collections in Java. Personally I like standard <a href="http://java.sun.com/docs/books/tutorial/collections/index.html">collections API</a> but i some cases can be awkward and add additional verboseness. This should not be a problem in latter version of Java 8+. There we would probably worry about not creating callback hell but hey there is no silver bullet for most stuff why should there be one for programming?     <br />    <br />    <h2>      The Guava Way     </h2>    Guava project is one of Google's core libraries where there are plenty of different core language aspects and problems covered. There are utilities and extensions for everyday usage like : collections, primitives, caching, common annotations, string processing, I/O, Math, Reflections and many others. We will only take a look at the Collections goodies so lets see some of them :     <br />    <code></code>    <pre><code>    // list<br />    ImmutableList&lt;String&gt; of =<br />        ImmutableList.of("a", "b", "c", "d");<br />    // Same one for map<br />    ImmutableMap&lt;String, String&gt; map =<br />         ImmutableMap.of("key1", "value1", "key2", "value2");<br />    //list of ints<br />    List&lt;Integer&gt; theList = Ints.asList(1, 2, 3, 4, 522, 5, 6);<br /><br /></code></pre>    The Guava Collections are compatible with the JDK collections since they mostly extend or implement the standard classes.     There are several cool utilities that are part of the API and have similar names with the ones from <i>java.util.Collections</i>. Basically any programmer who knows the JDK collections should be able to transfer to Guava easily. The ones for <i>List</i> is called <i>Lists</i>, one for <i>Set</i> is Sets, for <i>Map</i> is <i>Maps</i> and so on for the rest. For example:     <code></code>    <pre><code>//create new List<br />List&lt;someLongName&gt; list = Lists.newArrayList();<br />//create new  LinkedHashMap<br />Map&lt;someKeyType, SomeValueType&gt; map = Maps.newLinkedHashMap();<br /><br />//initalize Array List on the spot<br />List&lt;String&gt; someList = Lists.newArrayList("one", "two", "three");<br /><br />//set inital size for readability as well as performance<br />List&lt;Type&gt; exactly100 = Lists.newArrayListWithCapacity(100);<br />List&lt;Type&gt; approx100 = Lists.newArrayListWithExpectedSize(100);<br /><br /></code></pre>    <br />    Methods corresponding to a particular interface are grouped in a very intuitive manner. There are also some extremely good ways of building <a href="http://code.google.com/p/guava-libraries/wiki/CachesExplained">cache</a> with various of features :     <br />    <code></code><br />    <pre><code> Cache&lt;Integer, Customer&gt; cache = CacheBuilder.newBuilder()<br />        .weakKeys()<br />        .maximumSize(10000)<br />        .expireAfterWrite(10, TimeUnit.MINUTES)<br />        .build(new CacheLoader&lt;Integer, Customer&gt;() {<br /><br />          @Override<br />          public Customer load(Integer key) throws Exception {<br /><br />            return retreveCustomerForKey(key);<br />          }<br />        });<br /></code></pre>    <br />    Since Guava is available in most of the maven repositories its very easy to add it to your <a href="http://code.google.com/p/guava-libraries/wiki/UseGuavaInYourBuild"> build </a>    <br />    <h2>      lambdaj     </h2>    The idea behind the project is to manipulate collections in a functional and statically typed way. This is achieved in a way the avoids repetitions of simple tasks we usually do with collections.     Repetition makes programmers to go with copy/pasting and creates makes them create bugs by doing so. Accessing collections without explicit looping provides way of filtering, sorting, extraction, grouping, transforming, invoking a method on each item or sum up the elements or fields of those element in a collections.     Additionally to all these features lambdaj is also a DSL in a way since it adds very cool "sugar" features to the syntax making it more readable in pseudo-english. This is done with static methods so in order to use them we include them directly:     <br />    <code></code><br />    <pre><code>import static ch.lambdaj.Lambda.*;<br /></code></pre>    As it comes to checking and matching lambdaj relies deeply on <a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a>matchers. So for example to create a check for an odd integers and then filter a list with that check:     <code><pre>Matcher&lt;Integer&gt; odd = new Predicate&lt;Integer&gt;() {<br />        public boolean apply(Integer item) {<br />                return item % 2 == 1;<br />        }<br />};<br />List&ltInteger&gt oddNumbers = filter(odd, asList(1, 2, 3, 4, 5));<br />      </pre>    </code>    and as expected the list will return the list [1,3,5]. Lambdaj take a step further with it's DSL, for example :      <code><pre>List&lt;Beneficiary&gt; beneficiaries = with(transactions)<br />    .retain(having(on(Transaction.class)<br />              .getQunatity(), lessThan(100)))<br />    .extract(on(Transaction.class).getBeneficiary())<br />    .sort(on(Beneficiary.class).getName());<br />      </pre>    </code>     <br />    <br />    <h2>      Performance costs     </h2>    Although the best way to make your application fast is to have the cleanest code as possible there comes a time when you must optimize.In order to do that there is some info provided by the creators on the memory usage and time. Lambdaj has a performance <a href="http://code.google.com/p/lambdaj/wiki/PerformanceAnalysis"> wiki page</a> with code examples. There are also some test done by other programmers where they <a href="https://github.com/dmalch/lambda-comparison">compare</a> lambdaj with JDK8 for example. There are also some measurements on <a href="http://code.google.com/p/memory-measurer/wiki/ElementCostInDataStructures"> memory </a> usage of Guava. As for performance of Guava most of it's functionality is standard JDK classes builders and utilities so the overhead is minimal. At the end of the day it's up to you to decide how much effect each of these libraries will have on your project and if that is positive. I'm for the idea that almost every project must have Guava on it's classpath.     <br />     <h5>      Related links summary     </h5>    <ul>      <li>Guava<a href="http://code.google.com/p/guava-libraries/">http://code.google.com/p/guava-libraries/</a></li>      <li>lambdaj <a href="http://code.google.com/p/lambdaj/">http://code.google.com/p/lambdaj/</a> </li>      <li>Hamcrest <a href="http://hamcrest.org/">http://hamcrest.org/</a> </li>      <li>Guava Links <a href="http://www.tfnico.com/presentations/google-guava">http://www.tfnico.com/presentations/google-guava</a> </li>      <li>Guava examples <a href="https://github.com/mitemitreski/guava-examples">https://github.com/mitemitreski/guava-examples</a> </li>      <li>Guava presentation <a href="http://blog.mitemitreski.com/2012/07/google-guava-for-cleaner-code.html">http://blog.mitemitreski.com/2012/07/google-guava-for-cleaner-code.html</a></li>    </ul><p><em>Meta: this post is part of the <a href="http://javaadvent.com/">Java Advent Calendar</a> and is licensed under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons 3.0 Attribution</a> license. If you like it, please spread the word by sharing, tweeting, FB, G+ and so on! Want to write for the blog? We are looking for contributors to fill all 24 slot and would love to have your contribution! <a href="mailto:dify.ltd@gmail.com">Contact Attila Balazs</a> to contribute!</em></p>